#
#  run on collection of ecal super clusters and perform simple
#  analysis w/ EgammaSimpleAnalyzer
#  additionally, run tag&probe tool
#  
#
#  Author: Shahram Rahatlou, University of Rome & INFN
#  $Id: runPixelMatchAnalysis_ZP1000.cfg,v 1.3 2007/10/02 12:48:12 mmozer Exp $
#
process pixelMatchAnalysis =
{

  source = PoolSource {
    # Number of events program should run
    untracked vstring fileNames = 
    {
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/36C3D8BD-7260-DC11-AD7A-001731230A77.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/56197BD7-7260-DC11-B47C-00304875A9FD.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/58F5540B-7360-DC11-AC5E-001A92971AEC.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/704661C3-7260-DC11-A6FA-00304875A8F3.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/749D89D6-8660-DC11-87DC-00304875A7B3.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/A0A11C13-7360-DC11-8DEA-001A92810A94.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/C616B7BD-7460-DC11-9ED8-001A92971B68.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/DCB2B5A5-7760-DC11-8D91-003048723C15.root',
    '/store/mc/2007/9/11/RelVal-RelValZPrimeEEM1000-1189471912/0000/E21BD4E3-BA60-DC11-B76F-001A92971B90.root'
    }
  }

  untracked PSet maxEvents = {untracked int32 input = 50}	

############ initialize magnetic field #########################
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
############### initialize geometry #####################
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"
####also need to get the es source for geometry of CMS (needed for the rechits)###
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

  module pixelmatchanal = PixelMatchAnalysis 
  {

        #bool drellyan = false
        #bool jet = true
        bool drellyan = true
        bool jet = false

        string analprocess = "ZP_1000"
        #string analprocess = "DY_600"
        #string analprocess = "DY_200"
        #string analprocess = "GR"
        #string analprocess = "SG"

 
        string electronproducer = "pixelMatchGsfElectrons"
        string electronlabel = ""

        string hybridsuperclusterproducer = "hybridSuperClusters"
        string hybridsuperclusterlabel = ""

        string endcapsuperclusterproducer = "correctedEndcapSuperClustersWithPreshower"
        string endcapsuperclusterlabel = ""

        double ecalconesize = 0.5
        double hcalconesizemin = 0.15
        double hcalconesizemax = 0.3
        double hcalptMin = 0.
        double trackptMin = 1.5
        double trackconesize = 0.2
        double rspan = 999999.
        double zspan = 0.1
        double vetoConesize = 0.02

       double ptrecmin = 20.
       double etarecmin = 2.4
       double ntrackisol_max = 4.
       double trackisol_max = 0.2
       double hcalisol_max = 0.2
       double ecalisol_max = 0.5

  }












   module scCreationAnalysis = SCCreationAnalysis {

      untracked PSet params = {

         // treeFile
         untracked string treeFile = "t_scEfficiency.root"

         // for the actual analysis
         untracked InputTag scEETag = correctedEndcapSuperClustersWithPreshower
         untracked InputTag scEBTag = correctedHybridSuperClusters
         untracked double dR = 0.1
         untracked double dEta = 0.03

         // changed this to 15 GeV
         untracked double scEtCut = 5

         // for histograms
         untracked bool EventEfficiency = false

         untracked int32 PtBinsEB = 50
         untracked double PtMinEB = 0.0
         untracked double PtMaxEB = 200.0
         untracked int32 PtBinsEE = 50
         untracked double PtMinEE = 0.0
         untracked double PtMaxEE = 200.0
         untracked int32 PtBins = 50
         untracked double PtMin = 0.0
         untracked double PtMax = 200.0
         untracked int32 EtaBinsEB = 50
         untracked double EtaMinEB = -1.7
         untracked double EtaMaxEB = 1.7
         untracked int32 EtaBinsEE = 100
         untracked double EtaMinEE = -3.4
         untracked double EtaMaxEE = 3.4
         untracked int32 EtaBins = 100
         untracked double EtaMin = -3.4
         untracked double EtaMax = 3.4

         untracked int32 PhiBinsEB = 50
         untracked double PhiMinEB = -3.5
         untracked double PhiMaxEB = 3.5
         untracked int32 PhiBinsEE = 50
         untracked double PhiMinEE = -3.5
         untracked double PhiMaxEE = 3.5
         untracked int32 PhiBins = 50
         untracked double PhiMin = -3.5
         untracked double PhiMax = 3.5
      }
   }

   module gsfEleCreationAnalysis = GsfEleCreationAnalysis {

      untracked PSet params = {

         // for the actual analysis
         untracked InputTag gsfTrackEETag = pixelMatchGsfFitEndcap
         untracked InputTag gsfTrackEBTag = pixelMatchGsfFitBarrel
         untracked InputTag gsfEleTag = pixelMatchGsfElectrons

         untracked bool scToEle = false
         untracked double dR = 0.1

         // these requirements are turned off
         untracked int32 validHits = 0
         untracked double normalizedChi2 = 999999

         // for histograms
         untracked bool EventEfficiency = false

         // treeFile
         untracked string treeFile = "t_gsfEleEfficiency.root"


         untracked int32 PtBinsEB = 50
         untracked double PtMinEB = 0.0
         untracked double PtMaxEB = 200.0
         untracked int32 PtBinsEE = 50
         untracked double PtMinEE = 0.0
         untracked double PtMaxEE = 200.0
         untracked int32 PtBins = 50
         untracked double PtMin = 0.0
         untracked double PtMax = 200.0

         untracked int32 EtaBinsEB = 50
         untracked double EtaMinEB = -3.5
         untracked double EtaMaxEB = 3.5
         untracked int32 EtaBinsEE = 50
         untracked double EtaMinEE = -3.5
         untracked double EtaMaxEE = 3.5
         untracked int32 EtaBins = 50
         untracked double EtaMin = -3.5
         untracked double EtaMax = 3.5

         untracked int32 PhiBinsEB = 50
         untracked double PhiMinEB = -3.5
         untracked double PhiMaxEB = 3.5
         untracked int32 PhiBinsEE = 50
         untracked double PhiMinEE = -3.5
         untracked double PhiMaxEE = 3.5
         untracked int32 PhiBins = 50
         untracked double PhiMin = -3.5
         untracked double PhiMax = 3.5
      }
   }

include "EgammaAnalysis/ElectronIDProducers/data/electronId.cfi"

   include "SUSYBSMAnalysis/Zprime2eeAnalysis/data/gsfEleCreationAnalysis.cfi"
   include "SUSYBSMAnalysis/Zprime2eeAnalysis/data/scCreationAnalysis.cfi"



   path tagprobe = {electronId, scEfficiencyProducers, gsfEleEfficiencyProducers, gsfEleCreationAnalysis, scCreationAnalysis}
   path analysis = { pixelmatchanal }

   service = MessageLogger {
    untracked vstring destinations = { "cout","Zprime2ee.log" }
    untracked vstring categories =  {  "Zprime2eeAna","tnp" }
    //untracked vstring debugModules =  { "pixelmatchanal" }  #enable for eventwise info
    untracked PSet Zprime2ee.log = {untracked string threshold = "INFO"  #switch to DEBUG for event-info
				   untracked bool noLineBreaks = true
                                   untracked PSet default = { untracked int32 limit = 0 }
                                   untracked PSet Zprime2eeAna  = { untracked int32 limit = 10000000000}
                                   untracked PSet tnp = { untracked int32 limit = 10000000000}
    }
    untracked PSet cout = { untracked string threshold = "INFO" 
                                   untracked PSet default = { untracked int32 limit = 0 }
                                   untracked PSet Zprime2eeAna  = { untracked int32 limit = 10000000000}
                                   untracked PSet tnp = { untracked int32 limit = 10000000000}
    }
  }

  service = TFileService { 
	#string fileName = "rfio:/castor/cern.ch/cms/store/cmscaf/physics/analysis/Zprime2ee/caftest.root"
        string fileName = "caftest.root"
	#string fileName = "pixelmatchanal_DY_600.root"
        #string fileName = "pixelmatchanal_DY_200.root"
  }



}
