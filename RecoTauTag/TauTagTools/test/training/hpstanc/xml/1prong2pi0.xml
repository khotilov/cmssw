<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<MVATrainer>
  <general>
    <option name="trainfiles">train/train_%1$s%2$s.%3$s</option>
  </general>
  <input id="input">
    <var name="Pt" multiple="false" optional="false"/>
    <var name="JetPt" multiple="false" optional="false"/>
    <var name="JetTauDR" multiple="false" optional="false"/>
    <var name="ImpactParameterSignificance" multiple="false" optional="false"/>
    <var name="Mass" multiple="false" optional="false"/>
    <var name="EMFraction" multiple="false" optional="false"/>
    <var name="InvariantOpeningAngle" multiple="false" optional="false"/>
    <var name="BinnedTrackIsolation" multiple="true" optional="false"/>
    <var name="BinnedMaskedEcalIsolation" multiple="true" optional="false"/>
    <var name="BinnedMaskedHcalIsolation" multiple="true" optional="false"/>
    <!--Dalitz-->
    <var name="Dalitz2" multiple="true" optional="false"/>
  </input>

  <!--Split up all the iso variables-->
  <processor id="SplitTrackIso" name="ProcSplitter">
    <input> 
      <var source="input" name="BinnedTrackIsolation"/>
    </input>
    <config> 
      <select first="3"/>
    </config>
    <output>
      <var name="IsoTrack0"/>
      <var name="IsoTrack1"/>
      <var name="IsoTrack2"/>
      <var name="IsoTrack"/>
    </output>
  </processor>

  <processor id="SplitMaskedEcalIso" name="ProcSplitter">
    <input> 
      <var source="input" name="BinnedMaskedEcalIsolation"/>
    </input>
    <config> 
      <select first="3"/>
    </config>
    <output>
      <var name="IsoMaskedEcal0"/>
      <var name="IsoMaskedEcal1"/>
      <var name="IsoMaskedEcal2"/>
      <var name="IsoMaskedEcal"/>
    </output>
  </processor>

  <processor id="SplitMaskedHcalIso" name="ProcSplitter">
    <input> 
      <var source="input" name="BinnedMaskedHcalIsolation"/>
    </input>
    <config> 
      <select first="3"/>
    </config>
    <output>
      <var name="IsoMaskedHcal0"/>
      <var name="IsoMaskedHcal1"/>
      <var name="IsoMaskedHcal2"/>
      <var name="IsoMaskedHcal"/>
    </output>
  </processor>

  <!-- Give all the iso variable defaults -->
  <processor id="IsoVars" name="ProcOptional">
    <input>
      <var source="SplitTrackIso" name="IsoTrack0"/>
      <var source="SplitTrackIso" name="IsoTrack1"/>
      <var source="SplitTrackIso" name="IsoTrack2"/>
      <var source="SplitMaskedEcalIso" name="IsoMaskedEcal0"/>
      <var source="SplitMaskedEcalIso" name="IsoMaskedEcal1"/>
      <var source="SplitMaskedEcalIso" name="IsoMaskedEcal2"/>
      <var source="SplitMaskedHcalIso" name="IsoMaskedHcal0"/>
      <var source="SplitMaskedHcalIso" name="IsoMaskedHcal1"/>
      <var source="SplitMaskedHcalIso" name="IsoMaskedHcal2"/>
    </input>
    <config>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
      <neutral pos="0"/>
    </config>
    <output>
      <var name="IsoTrack0"/>
      <var name="IsoTrack1"/>
      <var name="IsoTrack2"/>
      <var name="IsoMaskedEcal0"/>
      <var name="IsoMaskedEcal1"/>
      <var name="IsoMaskedEcal2"/>
      <var name="IsoMaskedHcal0"/>
      <var name="IsoMaskedHcal1"/>
      <var name="IsoMaskedHcal2"/>
    </output>
  </processor>

  <!--Expand Dalitz variables-->
  <processor id="SplitDalitz" name="ProcSplitter">
    <input> 
      <var source="input" name="Dalitz2"/>
    </input>
    <config> 
      <select first="2"/>
    </config>
    <output>
      <var name="M12"/>
      <var name="M13"/>
      <var name="Dalitz"/>
    </output>
  </processor>
  <processor id="DalitzDefault" name="ProcOptional">
    <input> 
      <var source="SplitDalitz" name="M12"/>
      <var source="SplitDalitz" name="M13"/>
    </input>
    <config> 
      <neutral pos="0"/>
      <neutral pos="0"/>
    </config>
    <output>
      <var name="M12"/>
      <var name="M13"/>
    </output>
  </processor>
  <!--MVA defintion-->
  <processor id="1prong2pi0_hpstanc" name="ProcTMVA">
    <input>
      <var source="input" name="Pt"/>
      <var source="input" name="JetTauDR"/>
      <var source="input" name="ImpactParameterSignificance"/>
      <var source="input" name="Mass"/>
      <var source="input" name="EMFraction"/>
      <var source="input" name="InvariantOpeningAngle"/>
      <var source="IsoVars" name="IsoTrack0"/>
      <var source="IsoVars" name="IsoTrack1"/>
      <var source="IsoVars" name="IsoTrack2"/>
      <var source="IsoVars" name="IsoMaskedEcal0"/>
      <var source="IsoVars" name="IsoMaskedEcal1"/>
      <var source="IsoVars" name="IsoMaskedEcal2"/>
      <var source="IsoVars" name="IsoMaskedHcal0"/>
      <var source="IsoVars" name="IsoMaskedHcal1"/>
      <var source="IsoVars" name="IsoMaskedHcal2"/>
      <var source="DalitzDefault" name="M12"/>
      <var source="DalitzDefault" name="M13"/>
    </input>
    <config>
      <method type="MLP" name="MLP">VerbosityLevel=Verbose:NCycles=800:HiddenLayers=11,21:TestRate=10</method>
      <setup cuts="" options="VarTransform=G_Signal,D_Signal,G_Signal,D_Signal:NormMode=EqualNumEvents:NSigTrain=0:NBkgTrain=0"/>
    </config>
    <output>
      <var name="MVAOutput"/>
    </output>
  </processor>
  <!--Final output of classifier-->
  <output>
    <var source="1prong2pi0_hpstanc" name="MVAOutput"/>
  </output>
</MVATrainer>

