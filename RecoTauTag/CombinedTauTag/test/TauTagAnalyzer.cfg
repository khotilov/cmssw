#! /bin/env cmsRun

process myTauTagAnalyzer = {
  
service = AdaptorConfig {}

source = PoolSource{
  untracked vstring fileNames = { 	
    '/store/RelVal/2007/6/22/RelVal-RelVal150TTbar-1182505560/0000/049F5879-B920-DC11-BB52-000423D6B2D8.root',
    '/store/RelVal/2007/6/22/RelVal-RelVal150TTbar-1182505560/0000/1063BF5A-BA20-DC11-AAF7-000423D94AB0.root',
    '/store/RelVal/2007/6/22/RelVal-RelVal150TTbar-1182505560/0000/16099AD3-BA20-DC11-9436-000423D98EE0.root',
    '/store/RelVal/2007/6/22/RelVal-RelVal150TTbar-1182505560/0000/18FD5BE1-EA20-DC11-936F-000E0C3E6CCA.root'
  }
}
untracked PSet maxEvents = {untracked int32 input = -1}

include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"

# Magnetic Field
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# Geometry
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff"
include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
       
include "RecoTauTag/CombinedTauTag/data/coneIsolation.cfi"
include "RecoTauTag/CombinedTauTag/data/combinedTauTag.cfi"

### Begin - config of Conditions DB (where PDFs used to compute a likelihood ratio are stored)###
include "CondCore/DBCommon/data/CondDBCommon.cfi"

# (a) sq lite file 
#replace CondDBCommon.connect = "sqlite_file:tautagnew1.db"  
#replace CondDBCommon.catalog = "file:mycatalog.xml"

# (b) ORACLE
#replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_COND_BTAU"    
#replace CondDBCommon.catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_COND_GENERAL"            
#replace CondDBCommon.DBParameters.authenticationPath = "/afs/cern.ch/cms/DB/conddb"

# (c) FRONTIER
replace CondDBCommon.connect = "frontier://FrontierDev/CMS_COND_BTAU"
replace CondDBCommon.catalog = ""
replace CondDBCommon.DBParameters.authenticationPath = ""
replace CondDBCommon.DBParameters.loadBlobStreamer = true

es_source = PoolDBESSource { 
  using CondDBCommon
  VPSet toGet = { { string record = "CombinedTauTagRcd" string tag = "combinedtautag_likelihoodratioPDFs_0" } }
  untracked bool siteLocalConfig = true    # set true when FRONTIER used 
}
##### End - config of Conditions DB #############################################################

module theTauTagAnalyzer=TauTagAnalyzer{
   string CombinedTauTagProd = "combinedTauTag"
   string PVProd = "pixelVertices"
   string output_filename = "test.root"
}

# module execution
path p={coneIsolation,combinedTauTag,theTauTagAnalyzer}
}
