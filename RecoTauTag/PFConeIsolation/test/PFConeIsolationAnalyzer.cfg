#! /bin/env cmsRun

process myPFConeIsolationAnalyzer = {  
  service = AdaptorConfig {}
  source = PoolSource{
    untracked vstring fileNames = { 	
      "rfio:/castor/cern.ch/user/h/houchu/DiTaus-Pt20To420_Reco131dir/mc_physval_131_DiTaus_Pt20To420_1.root",
      "rfio:/castor/cern.ch/user/h/houchu/DiTaus-Pt20To420_Reco131dir/mc_physval_131_DiTaus_Pt20To420_2.root",
      "rfio:/castor/cern.ch/user/h/houchu/DiTaus-Pt20To420_Reco131dir/mc_physval_131_DiTaus_Pt20To420_3.root"	
    }
    #untracked int32 maxEvents = -1  
    untracked int32 maxEvents = 1000
  }

  # Message Logger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cout.threshold = "ERROR"

  # Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # Geometry
  include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
  include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi"
  include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cfi"
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"
  include "TrackingTools/GsfTracking/data/GsfElectronFit.cfi"
  include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"
  
  include "RecoParticleFlow/PFClusterProducer/data/particleFlowCluster.cff"
  include "RecoParticleFlow/PFTracking/data/particleFlowTrack.cff"
  include "RecoParticleFlow/PFTracking/data/elecPreId.cff"
  include "RecoParticleFlow/PFBlockProducer/data/particleFlowSimParticle.cff"
  include "RecoParticleFlow/PFBlockProducer/data/particleFlowBlock.cff"
  include "RecoParticleFlow/PFProducer/data/particleFlow.cff"
  include "RecoParticleFlow/PFProducer/data/particleFlowJetCandidates.cfi"
     
  include "RecoTauTag/PFConeIsolation/data/pfConeIsolation.cfi"

  module thePFConeIsolationAnalyzer=PFConeIsolationAnalyzer{
    #string PFRecTrackProd = "particleFlowTrack"
    string PFRecTrackProd = "elecpreid"
    string PFSimParticleProd = "particleFlowSimParticle"
    string PFBlockElementTrackProd = "particleFlowBlock"
    string PFConeIsolationProd = "pfConeIsolation"
    string PVProd = "pixelVertices"
    #string PVProd = "offlinePrimaryVerticesFromCTFTracks"
    bool test_useOnlyChargedHadrCand = true
    double test_Cand_minpt = 1.
    bool test_useOnlyChargedHadrforleadPFCand = true
    double test_trackercone_size = 0.5
    double test_trackersignalcone_size = 0.07
    double test_trackerisolcone_size = 0.45
    double test_matchingcone_size = 0.1
    double test_leadCand_minpt = 6.
    string output_filename = "test.root"
  }

  # module execution
  #path p={ctfWithMaterialTracks,particleFlowCluster,particleFlowTrack,particleFlowSimParticle,particleFlowBlock,particleFlow,particleFlowJetCandidates,iterativeCone5PFJets,pfConeIsolation,thePFConeIsolationAnalyzer}
  path p={globalMixedSeeds,ckfTrackCandidates,ctfWithMaterialTracks,particleFlowCluster,particleFlowTrack,particleFlowSimParticle,particleFlowBlock,particleFlow,particleFlowJetCandidates,iterativeCone5PFJets,pfConeIsolation,thePFConeIsolationAnalyzer}
}
