Questions -> Fedor Ratnikov: ratnikov@fnal.gov
$Id$

The purpose of jet validation package is to provide a tool to quickly
and automatically produce distributions reflecting sanity of jet objects.

Validation distributions are produced in two steps:
1. CMSSW application including JetValidator runs over reconstructed files
  collecting information about Calo and Gen jets. The resulting histograms
  are stored in output ROOT file.

2a. Release validation: Produced distributions for primary jet properties
  are compared with corresponding distributions in reference file. 
  Kolmogorov test is applied, resulting distributions are saved as a set
  of pictures ready to be published on the WEB. This step specifically 
  validates CaloJets. 

2b. Information about matched CaloJets and GenJets is processed, and physics
  properties of jets, like energy scale, energy resolution, spatial resolution,
  efficiencies are recovered. Results are plotted separately for different
  eta regions or different momentum regions.


Step 1.

cvs co Validation/RecoJets
cd Validation/RecoJets
scramv1 b
cd analysis
./fill_histograms.sh /store/CSA07/mc/2007/10/4/CSA07-CSA07JetMET-Tier0-A1-Chowder/0000/02DD858C-CC72-DC11-9824-000423D6CA02.root

Notes:
- the argument is a list of files to run over. May be long list.
- if filename starts with "/store" the file is searched in DBS, and 
  is searched locally otherwise.
- the script runs CaloJetTester sequentially for every jet algorithm, 
  and create separate ROOT file for every algorithm. It is a sequence of
  bug in DQM software which doesn't allow redirect different histograms
  independently into different files.

Step 2a.

cd ../test
scram v1 b
cd ../analysis

At this point we should have file with reference distributions which we are going 
to compare with newly produced distributions. It is important that both reference
and new files to be produced on events of exactly the same physics process, otherwise
possible inconsistency will reflect rather difference in physics, then difference in 
reconstruction.
For test, let's compare midPointCone5CaloJets with themselves:

cp midPointCone5CaloJets_validation.root midPointCone5CaloJets_validation_reference.root
../../../../test/slc4_ia32_gcc345/compareHists midPointCone5CaloJets_validation.root midPointCone5CaloJets_validation_reference.root 'TEST: Comparing midPointCone5CaloJets with themselves'

A set of .gif files with relevant names is created. Of course, all histograms are expected 
to have probability exactly one in this case.

Step 2b.

../../../../test/slc4_ia32_gcc345/plotHists midPointCone5CaloJets_validation.root

A set of .gif files with relevant names is created.
