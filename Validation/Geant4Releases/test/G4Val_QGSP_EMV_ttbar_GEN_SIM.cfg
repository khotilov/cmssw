process PROD  = 
{

   untracked PSet maxEvents = { untracked int32 input = 3 }
   
   service = MessageLogger
   {
      untracked vstring destinations = {"cout"}

      untracked vstring categories = { "FwkJob", "SimG4CoreApplication" }

      untracked PSet cout = 
      {
         untracked PSet default = { untracked int32 limit = 0 }  # kill all messages in the log
	 untracked PSet FwkJob  = { untracked int32 limit = -1 } # but FwkJob category - those unlimitted
	 untracked PSet SimG4CoreApplication = { untracked int32 limit = -1 } 
      }

      # uncomment if you want it...
      #
      # untracked vstring fwkJobReports = {"FrameworkJobReport.xml"}      
   }

   service = Timing {}
   
   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 123456789
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 98765432
         untracked uint32 g4SimHits = 9876
      }
   }

   #
   # this module is standard features starting release 1_2_0_pre4
   # and should be used to store random numbers for modules into
   # edm::Event (but not for sources, as of today Nov.7, 2006)
   #
   # of course, you have to place in the path to execute;
   # however, it's the service that caches the state of the engines,
   # and the producer only writes it into the event, thus it's NOT
   # important where in the path you place it - the state of the
   # engines will always be stored as of the beginning of an event
   # 
   module randomEngineStateProducer = RandomEngineStateProducer { }

   source = PythiaSource {
     untracked int32 pythiaPylistVerbosity = 0
     untracked bool pythiaHepMCVerbosity = false
     untracked int32 maxEventsToPrint = 0
     untracked bool pythiaVerbosity = false

     PSet PythiaParameters = {
       # This is a vector of ParameterSet names to be read, in this order
       vstring parameterSets =  {
         "pythiaUESettings",
         "processParameters"
       }

       # CMS default pythia parameters
       include "Configuration/Generator/data/PythiaUESettings.cfi"
   
       vstring processParameters = {
         'MSEL=0                  ! User defined processes',
         'MSUB(81) = 1            ! qqbar to QQbar',
         'MSUB(82) = 1            ! gg to QQbar',
         'MSTP(7) = 6             ! flavour = top',
         'PMAS(6,1) = 175.        ! top quark mass'
       }
     }
   }


   # event vertex smearing - applies only once (internal check)
   # Note : all internal generators will always do (0,0,0) vertex
   #
   include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

   #Geometry
   #
   ###include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
   ###es_module = TrackerGeometricDetESModule {}

es_source = XMLIdealGeometryESSource
{

  vstring geomXMLFiles = {
             "Geometry/CMSCommonData/data/materials.xml",
             "Geometry/CMSCommonData/data/rotations.xml",
             "Geometry/CMSCommonData/data/totem_rotations.xml",
             "Geometry/CMSCommonData/data/cms.xml",
             "Geometry/CMSCommonData/data/cmsMother.xml",
             "Geometry/CMSCommonData/data/cmsTracker.xml",
             "Geometry/CMSCommonData/data/caloBase.xml",
             "Geometry/CMSCommonData/data/cmsCalo.xml",
             "Geometry/CMSCommonData/data/muonBase.xml",
             "Geometry/CMSCommonData/data/cmsMuon.xml",
             "Geometry/CMSCommonData/data/mgnt.xml",
             "Geometry/CMSCommonData/data/beampipe.xml",
             "Geometry/CMSCommonData/data/cmsBeam.xml",
             "Geometry/CMSCommonData/data/muonMB.xml",
             "Geometry/CMSCommonData/data/muonMagnet.xml",
          # NOT USED "Geometry/CMSCommonData/data/cavern.xml"
             "Geometry/TrackerCommonData/data/pixfwdMaterials.xml",
             "Geometry/TrackerCommonData/data/pixfwdCommon.xml",
             "Geometry/TrackerCommonData/data/pixfwdPlaq.xml",
             "Geometry/TrackerCommonData/data/pixfwdPlaq1x2.xml",
             "Geometry/TrackerCommonData/data/pixfwdPlaq1x5.xml",
             "Geometry/TrackerCommonData/data/pixfwdPlaq2x3.xml",
             "Geometry/TrackerCommonData/data/pixfwdPlaq2x4.xml",
             "Geometry/TrackerCommonData/data/pixfwdPlaq2x5.xml",
             "Geometry/TrackerCommonData/data/pixfwdPanelBase.xml",
             "Geometry/TrackerCommonData/data/pixfwdPanel.xml",
             "Geometry/TrackerCommonData/data/pixfwdBlade.xml",
             "Geometry/TrackerCommonData/data/pixfwdNipple.xml",
             "Geometry/TrackerCommonData/data/pixfwdDisk.xml",
             "Geometry/TrackerCommonData/data/pixfwdCylinder.xml",
             "Geometry/TrackerCommonData/data/pixfwd.xml",
             "Geometry/TrackerCommonData/data/pixbarmaterial.xml",
             "Geometry/TrackerCommonData/data/pixbarladder.xml",
             "Geometry/TrackerCommonData/data/pixbarladderfull.xml",
             "Geometry/TrackerCommonData/data/pixbarladderhalf.xml",
             "Geometry/TrackerCommonData/data/pixbarlayer.xml",
             "Geometry/TrackerCommonData/data/pixbarlayer0.xml",
             "Geometry/TrackerCommonData/data/pixbarlayer1.xml",
             "Geometry/TrackerCommonData/data/pixbarlayer2.xml",
             "Geometry/TrackerCommonData/data/pixbar.xml",
             "Geometry/TrackerCommonData/data/tibmaterial.xml",
             "Geometry/TrackerCommonData/data/tibmodpar.xml",
             "Geometry/TrackerCommonData/data/tibmodule0.xml",
             "Geometry/TrackerCommonData/data/tibmodule0a.xml",
             "Geometry/TrackerCommonData/data/tibmodule0b.xml",
             "Geometry/TrackerCommonData/data/tibmodule2.xml",
             "Geometry/TrackerCommonData/data/tibstringpar.xml",
             "Geometry/TrackerCommonData/data/tibstringds.xml",
             "Geometry/TrackerCommonData/data/tibstring0c.xml",
             "Geometry/TrackerCommonData/data/tibstring0ll.xml",
             "Geometry/TrackerCommonData/data/tibstring0lr.xml",
             "Geometry/TrackerCommonData/data/tibstring0ul.xml",
             "Geometry/TrackerCommonData/data/tibstring0ur.xml",
             "Geometry/TrackerCommonData/data/tibstring0.xml",
             "Geometry/TrackerCommonData/data/tibstring1c.xml",
             "Geometry/TrackerCommonData/data/tibstring1ll.xml",
             "Geometry/TrackerCommonData/data/tibstring1lr.xml",
             "Geometry/TrackerCommonData/data/tibstring1ul.xml",
             "Geometry/TrackerCommonData/data/tibstring1ur.xml",
             "Geometry/TrackerCommonData/data/tibstring1.xml",
             "Geometry/TrackerCommonData/data/tibstringss.xml",
             "Geometry/TrackerCommonData/data/tibstring2c.xml",
             "Geometry/TrackerCommonData/data/tibstring2ll.xml",
             "Geometry/TrackerCommonData/data/tibstring2lr.xml",
             "Geometry/TrackerCommonData/data/tibstring2ul.xml",
             "Geometry/TrackerCommonData/data/tibstring2ur.xml",
             "Geometry/TrackerCommonData/data/tibstring2.xml",
             "Geometry/TrackerCommonData/data/tibstring3c.xml",
             "Geometry/TrackerCommonData/data/tibstring3ll.xml",
             "Geometry/TrackerCommonData/data/tibstring3lr.xml",
             "Geometry/TrackerCommonData/data/tibstring3ul.xml",
             "Geometry/TrackerCommonData/data/tibstring3ur.xml",
             "Geometry/TrackerCommonData/data/tibstring3.xml",
             "Geometry/TrackerCommonData/data/tiblayerpar.xml",
             "Geometry/TrackerCommonData/data/tiblayer0.xml",
             "Geometry/TrackerCommonData/data/tiblayer1.xml",
             "Geometry/TrackerCommonData/data/tiblayer2.xml",
             "Geometry/TrackerCommonData/data/tiblayer3.xml",
             "Geometry/TrackerCommonData/data/tib.xml",
             "Geometry/TrackerCommonData/data/tidmaterial.xml",
             "Geometry/TrackerCommonData/data/tidmodpar.xml",
             "Geometry/TrackerCommonData/data/tidmodule0.xml",
             "Geometry/TrackerCommonData/data/tidmodule0r.xml",
             "Geometry/TrackerCommonData/data/tidmodule0l.xml",
             "Geometry/TrackerCommonData/data/tidmodule1.xml",
             "Geometry/TrackerCommonData/data/tidmodule1r.xml",
             "Geometry/TrackerCommonData/data/tidmodule1l.xml",
             "Geometry/TrackerCommonData/data/tidmodule2.xml",
             "Geometry/TrackerCommonData/data/tidringpar.xml",
             "Geometry/TrackerCommonData/data/tidring0.xml",
             "Geometry/TrackerCommonData/data/tidring0f.xml",
             "Geometry/TrackerCommonData/data/tidring0b.xml",
             "Geometry/TrackerCommonData/data/tidring1.xml",
             "Geometry/TrackerCommonData/data/tidring1f.xml",
             "Geometry/TrackerCommonData/data/tidring1b.xml",
             "Geometry/TrackerCommonData/data/tidring2.xml",
             "Geometry/TrackerCommonData/data/tid.xml",
             "Geometry/TrackerCommonData/data/tidf.xml",
             "Geometry/TrackerCommonData/data/tidb.xml",
             "Geometry/TrackerCommonData/data/tobmaterial.xml",
             "Geometry/TrackerCommonData/data/tobmodpar.xml",
             "Geometry/TrackerCommonData/data/tobmodule0.xml",
             "Geometry/TrackerCommonData/data/tobmodule2.xml",
             "Geometry/TrackerCommonData/data/tobmodule4.xml",
             "Geometry/TrackerCommonData/data/tobrodpar.xml",
             "Geometry/TrackerCommonData/data/tobrod0c.xml",
             "Geometry/TrackerCommonData/data/tobrod0l.xml",
             "Geometry/TrackerCommonData/data/tobrod0h.xml",
             "Geometry/TrackerCommonData/data/tobrod0.xml",
             "Geometry/TrackerCommonData/data/tobrod1l.xml",
             "Geometry/TrackerCommonData/data/tobrod1h.xml",
             "Geometry/TrackerCommonData/data/tobrod1.xml",
             "Geometry/TrackerCommonData/data/tobrod2c.xml",
             "Geometry/TrackerCommonData/data/tobrod2l.xml",
             "Geometry/TrackerCommonData/data/tobrod2h.xml",
             "Geometry/TrackerCommonData/data/tobrod2.xml",
             "Geometry/TrackerCommonData/data/tobrod3l.xml",
             "Geometry/TrackerCommonData/data/tobrod3h.xml",
             "Geometry/TrackerCommonData/data/tobrod3.xml",
             "Geometry/TrackerCommonData/data/tobrod4c.xml",
             "Geometry/TrackerCommonData/data/tobrod4l.xml",
             "Geometry/TrackerCommonData/data/tobrod4h.xml",
             "Geometry/TrackerCommonData/data/tobrod4.xml",
             "Geometry/TrackerCommonData/data/tobrod5l.xml",
             "Geometry/TrackerCommonData/data/tobrod5h.xml",
             "Geometry/TrackerCommonData/data/tobrod5.xml",
             "Geometry/TrackerCommonData/data/tob.xml",
             "Geometry/TrackerCommonData/data/tecmaterial.xml",
             "Geometry/TrackerCommonData/data/tecmodpar.xml",
             "Geometry/TrackerCommonData/data/tecmodule0.xml",
             "Geometry/TrackerCommonData/data/tecmodule0r.xml",
             "Geometry/TrackerCommonData/data/tecmodule0s.xml",
             "Geometry/TrackerCommonData/data/tecmodule1.xml",
             "Geometry/TrackerCommonData/data/tecmodule1r.xml",
             "Geometry/TrackerCommonData/data/tecmodule1s.xml",
             "Geometry/TrackerCommonData/data/tecmodule2.xml",
             "Geometry/TrackerCommonData/data/tecmodule3.xml",
             "Geometry/TrackerCommonData/data/tecmodule4.xml",
             "Geometry/TrackerCommonData/data/tecmodule4r.xml",
             "Geometry/TrackerCommonData/data/tecmodule4s.xml",
             "Geometry/TrackerCommonData/data/tecmodule5.xml",
             "Geometry/TrackerCommonData/data/tecmodule6.xml",
             "Geometry/TrackerCommonData/data/tecpetpar.xml",
             "Geometry/TrackerCommonData/data/tecring0.xml",
             "Geometry/TrackerCommonData/data/tecring1.xml",
             "Geometry/TrackerCommonData/data/tecring2.xml",
             "Geometry/TrackerCommonData/data/tecring3.xml",
             "Geometry/TrackerCommonData/data/tecring4.xml",
             "Geometry/TrackerCommonData/data/tecring5.xml",
             "Geometry/TrackerCommonData/data/tecring6.xml",
             "Geometry/TrackerCommonData/data/tecring0f.xml",
             "Geometry/TrackerCommonData/data/tecring1f.xml",
             "Geometry/TrackerCommonData/data/tecring2f.xml",
             "Geometry/TrackerCommonData/data/tecring3f.xml",
             "Geometry/TrackerCommonData/data/tecring4f.xml",
             "Geometry/TrackerCommonData/data/tecring5f.xml",
             "Geometry/TrackerCommonData/data/tecring6f.xml",
             "Geometry/TrackerCommonData/data/tecring0b.xml",
             "Geometry/TrackerCommonData/data/tecring1b.xml",
             "Geometry/TrackerCommonData/data/tecring2b.xml",
             "Geometry/TrackerCommonData/data/tecring3b.xml",
             "Geometry/TrackerCommonData/data/tecring4b.xml",
             "Geometry/TrackerCommonData/data/tecring5b.xml",
             "Geometry/TrackerCommonData/data/tecring6b.xml",
             "Geometry/TrackerCommonData/data/tecpetalf.xml",
             "Geometry/TrackerCommonData/data/tecpetalb.xml",
             "Geometry/TrackerCommonData/data/tecpetal0.xml",
             "Geometry/TrackerCommonData/data/tecpetal0f.xml",
             "Geometry/TrackerCommonData/data/tecpetal0b.xml",
             "Geometry/TrackerCommonData/data/tecpetal3.xml",
             "Geometry/TrackerCommonData/data/tecpetal3f.xml",
             "Geometry/TrackerCommonData/data/tecpetal3b.xml",
             "Geometry/TrackerCommonData/data/tecpetal6f.xml",
             "Geometry/TrackerCommonData/data/tecpetal6b.xml",
             "Geometry/TrackerCommonData/data/tecpetal8f.xml",
             "Geometry/TrackerCommonData/data/tecpetal8b.xml",
             "Geometry/TrackerCommonData/data/tecwheel.xml",
             "Geometry/TrackerCommonData/data/tecwheela.xml",
             "Geometry/TrackerCommonData/data/tecwheelb.xml",
             "Geometry/TrackerCommonData/data/tecwheelc.xml",
             "Geometry/TrackerCommonData/data/tecwheeld.xml",
             "Geometry/TrackerCommonData/data/tec.xml",
             "Geometry/TrackerCommonData/data/trackermaterial.xml",
             "Geometry/TrackerCommonData/data/tracker.xml",
             "Geometry/TrackerCommonData/data/trackerpixbar.xml",
             "Geometry/TrackerCommonData/data/trackerpixfwd.xml",
             "Geometry/TrackerCommonData/data/trackertib.xml",
             "Geometry/TrackerCommonData/data/trackertid.xml",
             "Geometry/TrackerCommonData/data/trackertob.xml",
             "Geometry/TrackerCommonData/data/trackertec.xml",
             "Geometry/TrackerCommonData/data/trackerother.xml",
             "Geometry/EcalCommonData/data/eregalgo.xml",
             "Geometry/EcalCommonData/data/ebalgo.xml",
             "Geometry/EcalCommonData/data/ebcon.xml",
             "Geometry/EcalCommonData/data/ebrot.xml",
             "Geometry/EcalCommonData/data/eealgo.xml",
             "Geometry/EcalCommonData/data/esalgo.xml",
             "Geometry/HcalCommonData/data/hcalrotations.xml",
             "Geometry/HcalCommonData/data/hcalalgo.xml",
             "Geometry/HcalCommonData/data/hcalbarrelalgo.xml",
             "Geometry/HcalCommonData/data/hcalendcapalgo.xml",
             "Geometry/HcalCommonData/data/hcalouteralgo.xml",
             "Geometry/HcalCommonData/data/hcalforwardalgo.xml",
             "Geometry/HcalCommonData/data/hcalforwardmaterial.xml",
             "Geometry/MuonCommonData/data/mbCommon.xml",
             "Geometry/MuonCommonData/data/mb1.xml",
             "Geometry/MuonCommonData/data/mb2.xml",
             "Geometry/MuonCommonData/data/mb3.xml",
             "Geometry/MuonCommonData/data/mb4.xml",
             "Geometry/MuonCommonData/data/muonYoke.xml", 
             "Geometry/MuonCommonData/data/mf.xml",

          # numbering for all muon DT, RPC and CSC reco and/or sim? 
             "Geometry/MuonCommonData/data/muonNumbering.xml",

          # Tracker file to define structure ... is this for reco and/or sim only? 
             "Geometry/TrackerCommonData/data/trackerStructureTopology.xml",

          # Tracker SpecPar selection to define sensitive volumes 
             "Geometry/TrackerSimData/data/trackersens.xml", 

          # ECAL SpecPar selection to define sensitive volumes 
             "Geometry/EcalSimData/data/ecalsens.xml", 

          # HCAL SpecPar selection to define sensitive volumes 
             "Geometry/HcalCommonData/data/hcalsens.xml", 

          # Calo ... ??? Sim? Reco? both? 
             "Geometry/HcalSimData/data/CaloUtil.xml",

          # all Muon (CSC, DT, RPC) SpecPars to define sensitive volumes 
             "Geometry/MuonSimData/data/muonSens.xml", 

          # DT filter for reconstruction geometry 
             "Geometry/DTGeometryBuilder/data/dtSpecsFilter.xml", 

          # CSC filter for reconstruction geometry 
             "Geometry/CSCGeometryBuilder/data/cscSpecsFilter.xml",

          # CSC data 
             "Geometry/CSCGeometryBuilder/data/cscSpecs.xml",

          # RPC specs 
             "Geometry/RPCGeometryBuilder/data/RPCSpecs.xml",

          # Production cuts... Simulation only!!! 
             "Geometry/HcalSimData/data/HcalProdCuts.xml",
             "Geometry/EcalSimData/data/EcalProdCuts.xml",
             "Geometry/TrackerSimData/data/trackerProdCuts.xml",
             "Geometry/TrackerSimData/data/trackerProdCutsBEAM.xml",
             "Geometry/MuonSimData/data/muonProdCuts.xml",

          # Needed for magnetic field simulation.
             "Geometry/CMSCommonData/data/FieldParameters.xml"
   }
   string rootNodeName = "cms:OCMS"
}
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"   
   
   # Magnetic Field
   #
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # Event, etc. output
   #
   module GEN-SIM = PoolOutputModule { untracked string fileName = "pythia_minbias_detsim.root" }
		
   # Geant4-based CMS Detector simulation
   #
   include "SimG4Core/Application/data/g4SimHits.cfi"
   ### replace g4SimHits.StoreRndmSeeds = true

   # now the order of execution
   #   
   path p1 = { VtxSmeared, g4SimHits, randomEngineStateProducer }
   endpath outpath = { GEN-SIM }
   
}		
