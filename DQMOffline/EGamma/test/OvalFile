
<var name="TEST_RELEASE" value="3_4_0_pre5">
<var name="TEST_GLOBAL_TAG" value="MC_3XY_V12">
<var name="TEST_GLOBAL_STARTUP_TAG" value="STARTUP3X_V11">

The DBS_* variables are configuration variables for the script dbs_discovery.py,
which prepares and send a query to the Data Discovery web server,
and receive as a result the corresponding list of input data files.

<var name="DBS_RELEASE" value="CMSSW_${TEST_RELEASE}">
<var name="DBS_TIER" value="-RECO">
<var name="DBS_COND" value="${TEST_GLOBAL_TAG}-v1">

Oval is able to check the output channel of an execution and compare it with a reference output.
The tags below are defining which are lines to be compared. The currently specification is a
first draft, and we do not yet check the differences that Oval could raise.

<diffline expr="^(TH1.Print Name  = [a-zA-Z_]+, Entries= ).*$">
<diffnumber expr="^TH1.Print Name  = [a-zA-Z_]+, Entries= (\d+),.*$" tolerance="20%">
<diffnumber expr="^TH1.Print Name  = [a-zA-Z_]+, Entries= \d+, Total sum= (\S+)$" tolerance="10%">
<diffline expr="^(h_\S+ has )\d+ entries of mean value \S+$">
<diffnumber expr="^h_\S+ has (\d+) entries of mean value \S+$" tolerance="20%">
<diffnumber expr="^h_\S+ has \d+ entries of mean value (\S+)$" tolerance="10%">
<!diffvar name="HISTO" expr="^TH1.Print Name  = [a-zA-Z_]+, Entries= \d+, Total sum= (\S+)$" tolerance="10%">


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
================================================================================
Tests with same datasets as release validation
================================================================================
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

<environment name="RelValAnalysis">

  <var name="VAL_ANALYZER" value="ElectronAnalyzer">
  <var name="VAL_CONFIGURATION" value="${VAL_ANALYZER}_cfg.py">
  <!--var name="DBS_RELEASE" value="LOCAL"-->
  <!--var name="DBS_COND" value=""-->

  <var name="PUB_INPUT_FOLDER" value="DQMData/Egamma/ElectronAnalyzer/">
  <var name="PUB_TITLE" value="DQMOffline Electron Histograms for ${TEST_RELEASE}">
  <var name="PUB_COMMENT" value="">
  <var name="PUB_OUTPUT_DIR" value="/afs/cern.ch/cms/Physics/egamma/www/validation/340pre5/Electrons/DqmOffline">
  
  <environment name="Pt35">
    <var name="DBS_SAMPLE" value="RelValSingleElectronPt35">
    <executable name="dbs_discovery.py">
    <var name="TEST_HISTOS_FILE" value="cmsRun.Pt35.olog.electronHistos.root">
    <executable name="cmsRun" args="ElectronAnalyzer_cfg.py">
    <executable name="cmsRun" args="ElectronOfflineClient_cfg.py">
    <!executable name="root" args="-b -l -q eleListHistos.C">
    <var name="PUB_INPUT_FILE" value="${TEST_HISTOS_FILE}">
    <var name="PUB_OUTPUT_DIR" value="${PUB_OUTPUT_DIR}/${DBS_SAMPLE}">
    <var name="PUB_TITLE" value="${PUB_TITLE} and ${DBS_SAMPLE}">
    <executable name="root" args="-b -l -n -q elePublishHistos.C">
  </environment>
  
  <environment name="QcdPt80Pt120">
    <var name="DBS_SAMPLE" value="RelValQCD_Pt_80_120">
    <executable name="dbs_discovery.py">
    <var name="TEST_HISTOS_FILE" value="cmsRun.QcdPt80Pt120.olog.electronHistos.root">
    <executable name="cmsRun" args="ElectronAnalyzer_cfg.py">
    <executable name="cmsRun" args="ElectronOfflineClient_cfg.py">
    <executable name="root" args="-b -l -q eleListHistos.C">
  </environment>
  
  <environment name="Pt10">
    <var name="DBS_SAMPLE" value="RelValSingleElectronPt10">
    <executable name="dbs_discovery.py">
    <var name="TEST_HISTOS_FILE" value="cmsRun.Pt10.olog.electronHistos.root">
    <executable name="cmsRun" args="ElectronAnalyzer_cfg.py">
    <executable name="cmsRun" args="ElectronOfflineClient_cfg.py">
    <executable name="root" args="-b -l -q eleListHistos.C">
  </environment>
  
  <environment name="TTbar">
    <var name="DBS_SAMPLE" value="RelValTTbar">
    <executable name="dbs_discovery.py">
    <var name="TEST_HISTOS_FILE" value="cmsRun.TTbar.olog.electronHistos.root">
    <executable name="cmsRun" args="ElectronAnalyzer_cfg.py">
    <executable name="cmsRun" args="ElectronOfflineClient_cfg.py">
    <executable name="root" args="-b -l -q eleListHistos.C">
  </environment>
  
  <environment name="ZEEIdeal">
    <var name="DBS_SAMPLE" value="RelValZEE">
    <!--var name="DBS_COND" value="MC"-->
    <executable name="dbs_discovery.py">
    <var name="TEST_HISTOS_FILE" value="cmsRun.ZEEIdeal.olog.electronHistos.root">
    <executable name="cmsRun" args="ElectronAnalyzer_cfg.py">
    <executable name="cmsRun" args="ElectronOfflineClient_cfg.py">
    <executable name="root" args="-b -l -n -q eleListHistos.C">
  </environment>
  
  <environment name="ZEEStartup">
    <var name="DBS_SAMPLE" value="RelValZEE">
    <var name="TEST_GLOBAL_TAG" value="${TEST_GLOBAL_STARTUP_TAG}">
    <var name="DBS_COND" value="${TEST_GLOBAL_TAG}-v1">
    <!--var name="DBS_COND" value="STARTUP"-->
    <executable name="dbs_discovery.py">
    <var name="TEST_HISTOS_FILE" value="cmsRun.ZEEStartup.olog.electronHistos.root">
    <executable name="cmsRun" args="ElectronAnalyzer_cfg.py">
    <executable name="cmsRun" args="ElectronOfflineClient_cfg.py">
    <executable name="root" args="-b -l -q eleListHistos.C">
  </environment>
  
</environment>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
================================================================================
================================================================================
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

