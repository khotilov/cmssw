<?xml version="1.0"?>
<DDDefinition xmlns="http://www.cern.ch/cms/DDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cern.ch/cms/DDL ../../../DetectorDescription/Schema/DDLSchema.xsd">

<ConstantsSection label="brm.xml" eval="true">
 <Constant name="dzBSC1"       value="0.65*cm"/>
 <Constant name="dzBSC2"       value="0.8*cm"/>
 <Constant name="cutBSC2"      value="26.78*cm"/> 
 <Constant name="dBSC2Beam"    value="5*cm"/> 
 <Constant name="dxBSC2"       value="[cms:ForwdBeamR4]+[dBSC2Beam]-[cutBSC2]"/>
 <Constant name="dhTrap"       value="47.65*cm"/>
 <Constant name="dlTrap"       value="5.5*cm"/>
 <Constant name="dLTrap"       value="11.5*cm"/>
 <Constant name="rMinBSC"      value="22.5*cm"/>
 <Constant name="rMaxBSC"      value="45.4*cm"/>
 <Constant name="zposBSC1"     value="[forwardshield:FixShldZ1]-[dzBSC1]"/>
 <Constant name="zposBSC2"     value="[forward:CastorZ1]-[dzBSC2]"/>
 </ConstantsSection>

<SolidSection label="brm.xml">
 <Tubs name="BSC1" rMin="[cms:ForwdBeamR1]" rMax="95*cm"
       dz="[dzBSC1]"  startPhi="0*deg" deltaPhi="360*deg"/>
 <Tubs name="BSC2" rMin="[cms:ForwdBeamR4]" rMax="[cms:ForwdDetsR1]"
       dz="[dzBSC2]"  startPhi="0*deg" deltaPhi="360*deg"/>
 
 <TruncTubs name="BSCTubs" rMin="20*cm" rMax="[rMaxBSC]"
       zHalf="[dzBSC1]"   cutAtStart="[rMinBSC]" cutAtDelta="[rMinBSC]" 
       startPhi="0*deg" deltaPhi="45*deg" cutInside="true"/>

 <TruncTubs name="BSC2Pad" rMin="20*cm" rMax="43.78*cm"
       zHalf="[dzBSC2]"   cutAtStart="[cutBSC2]" cutAtDelta="[cutBSC2]" 
       startPhi="0*deg" deltaPhi="45*deg" cutInside="true"/>

 <Trapezoid name="BSCTrap" dz="[dzBSC1]"     alp1="0*deg"    bl1="[dlTrap]"
                        tl1="[dLTrap]" h1="[dhTrap]"     alp2="0*deg"
                        bl2="[dlTrap]" tl2="[dLTrap]" h2="[dhTrap]"
                        phi="0*deg"     theta="0*deg" />
 <Trapezoid name="BSCTTop" dz="[dzBSC1]"     alp1="0*deg"    bl1="([dlTrap]+[dLTrap])/2"
                        tl1="[dLTrap]" h1="[dhTrap]/2"     alp2="0*deg"
                        bl2="([dlTrap]+[dLTrap])/2" tl2="[dLTrap]" h2="[dhTrap]/2"
                        phi="0*deg"     theta="0*deg" />
 <Trapezoid name="BSCTBottom" dz="[dzBSC1]"     alp1="0*deg"    bl1="[dlTrap]"
                        tl1="([dlTrap]+[dLTrap])/2" h1="[dhTrap]/2"     alp2="0*deg"
                        bl2="[dlTrap]" tl2="([dlTrap]+[dLTrap])/2" h2="[dhTrap]/2"
                        phi="0*deg"     theta="0*deg" />
</SolidSection>

<LogicalPartSection label="brm.xml">
 <LogicalPart name="BSC1" category="unspecified">
  <rSolid name="BSC1"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="BSC2" category="unspecified">
  <rSolid name="BSC2"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="BSCTrap" category="unspecified">
  <rSolid name="BSCTrap"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="BSCTTop" category="unspecified">
  <rSolid name="BSCTTop"/>
  <rMaterial name="materials:Scintillator"/>
 </LogicalPart>
 <LogicalPart name="BSCTBottom" category="unspecified">
  <rSolid name="BSCTBottom"/>
  <rMaterial name="materials:Scintillator"/>
 </LogicalPart>
 <LogicalPart name="BSC2Pad" category="unspecified">
  <rSolid name="BSC2Pad"/>
  <rMaterial name="materials:Scintillator"/>
 </LogicalPart>
 <LogicalPart name="BSCTubs" category="unspecified">
  <rSolid name="BSCTubs"/>
  <rMaterial name="materials:Scintillator"/>
 </LogicalPart>
</LogicalPartSection>

<PosPartSection label="brm.xml">
 <PosPart copyNumber="1">
   <rParent name="forwardshield:OQUA"/>
   <rChild name="brm:BSC1"/>
  <rRotation name="brmrotations:B45R"/>
  <Translation x="0*fm" y="0*fm" z="[zposBSC1]" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="brm:BSC1"/>
   <rChild name="brm:BSCTrap"/>
  <rRotation name="rotations:000D"/>
  <Translation x="65*cm" y="0*cm" z="0*fm" />
 </PosPart>
 <PosPart copyNumber="2">
   <rParent name="brm:BSC1"/>
   <rChild name="brm:BSCTrap"/>
  <rRotation name="brmrotations:B90P"/>
  <Translation x="0*cm" y="+65*cm" z="0*fm" />
 </PosPart>
 <PosPart copyNumber="3">
   <rParent name="brm:BSC1"/>
   <rChild name="brm:BSCTrap"/>
  <rRotation name="brmrotations:B90M"/>
  <Translation x="0*cm" y="-65*cm" z="0*fm" />
 </PosPart>
 <PosPart copyNumber="4">
   <rParent name="brm:BSC1"/>
   <rChild name="brm:BSCTrap"/>
  <rRotation name="brmrotations:B90L"/>
  <Translation x="-65*cm" y="0*cm" z="0*fm" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="brm:BSCTrap"/>
   <rChild name="brm:BSCTTop"/>
  <rRotation name="rotations:000D"/>
  <Translation x="0*cm" y="[dhTrap]/2" z="0*fm" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="brm:BSCTrap"/>
   <rChild name="brm:BSCTBottom"/>
  <rRotation name="rotations:000D"/>
  <Translation x="0*cm" y="-[dhTrap]/2" z="0*fm" />
 </PosPart>

 <PosPart copyNumber="1">
   <rParent name="cms:CMSE"/>
   <rChild name="brm:BSC2"/>
   <rRotation name="rotations:000D"/>
  <Translation x="0*fm" y="0*fm" z="[zposBSC2]" />
 </PosPart>
 <PosPart copyNumber="2">
   <rParent name="cms:CMSE"/>
   <rChild name="brm:BSC2"/>
   <rRotation name="rotations:000D"/>
   <Translation x="0*fm" y="0*fm" z="-[zposBSC2]" />
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="brm:BSC2"/>
   <rChild name="brm:BSC2Pad"/>
   <rRotation name="brmrotations:B22X"/>
   <Translation x="[dxBSC2]" y="0*fm" z="0*fm" />
 </PosPart>
 <PosPart copyNumber="2">
   <rParent name="brm:BSC2"/>
   <rChild name="brm:BSC2Pad"/>
   <rRotation name="brmrotations:B202X"/>
   <Translation x="-[dxBSC2]" y="0*fm" z="0*fm" />
 </PosPart>

<Algorithm name="hcal:DDHCalAngular">
   <rParent name="brm:BSC1"/>
   <String  name="ChildName"    value="BSCTubs"/>
   <String  name="RotNameSpace" value="hcalrotations"/>
   <Numeric name="n"            value="8" />
   <Numeric name="startCopyNo"  value="1" />
   <Numeric name="incrCopyNo"   value="1" />
   <Numeric name="rangeAngle"   value="360*deg"/>
   <Numeric name="startAngle"   value="0*deg"/>
   <Numeric name="shiftY"       value="0*fm"/>
   <Numeric name="shiftX"       value="0*fm"/>
   <Numeric name="zoffset"      value="0*fm"/>
</Algorithm>

</PosPartSection>
</DDDefinition>
