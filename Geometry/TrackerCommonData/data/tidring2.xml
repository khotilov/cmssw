<?xml version="1.0"?>
<DDDefinition xmlns="http://www.cern.ch/cms/DDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cern.ch/cms/DDL ../../DetectorDescription/Schema/DDLSchema.xsd">

<ConstantsSection label="tidring2.xml" eval="true">
 <Constant name="zero"           value="0.0*fm"/>
 <Constant name="Rmin"           value="35.300*cm"/>
 <Constant name="NPhi"           value="40"/>
 <Constant name="PhiOff"         value="0*deg"/>
 <Constant name="ICBR"           value="34.000*cm"/>
 <Constant name="CoolR1"         value="46.148*cm"/>
 <Constant name="CoolR2"         value="38.871*cm"/>
 <Constant name="CoolSide"       value="2"/>
 <Constant name="ICBTailR"       value="35.20*cm"/>
 <Constant name="ICCRPos"        value="33.80*cm"/>
 <Constant name="RPos"           value="43.2368*cm"/>
<!-- <Constant name="RPos"           value="[Rmin]+([tidmodule2:FullHeight]+
           [tidmodpar:TopFrameHeight]+[tidmodpar:BottomFrameHeight]-
           [tidmodpar:BottomFrameOver])/2"/> -->
 <Constant name="ICBTailW"       value="([tidringpar:Rout]-[ICBTailR]-
           [tidringpar:ICBTailTol])"/>
 <Constant name="ICBTailRPos"    value="([tidringpar:Rout]+[ICBTailR]-
           [tidringpar:ICBTailTol])/2"/>
</ConstantsSection>

<SolidSection label="tidring2.xml">
 <Tubs name="TIDRing2ICB"             rMin="([ICBR]-[tidringpar:ICBW]/2)" 
       rMax="([ICBR]+[tidringpar:ICBW]/2)" dz="[tidringpar:ICBT]/2" 
       startPhi="0*deg"               deltaPhi="360.*deg"/>
 <Box name="TIDRing2ICBTail"          dx="[tidringpar:ICBTailH]/2"
       dy="[ICBTailW]/2"              dz="[tidringpar:ICBTailT]/2"/>
 <Tubs name="TIDRing2Cool1"           rMin="([CoolR1]-[tidringpar:CoolW]/2)" 
       rMax="([CoolR1]+[tidringpar:CoolW]/2)" dz="[tidringpar:CoolT]/2" 
       startPhi="0*deg"               deltaPhi="360.*deg"/>
 <Tubs name="TIDRing2Cool2"           rMin="([CoolR2]-[tidringpar:CoolW]/2)" 
       rMax="([CoolR2]+[tidringpar:CoolW]/2)" dz="[tidringpar:CoolT]/2" 
       startPhi="0*deg"               deltaPhi="360.*deg"/>
</SolidSection>

<LogicalPartSection label="tidring2.xml">
 <LogicalPart name="TIDRing2" category="unspecified">
  <rSolid name="tidringpar:TIDRing"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="TIDStructure2" category="unspecified">
  <rSolid name="tidringpar:TIDStructure"/>
  <rMaterial name="tidmaterial:TID_mech"/>
 </LogicalPart>
 <LogicalPart name="TIDICC2" category="unspecified">
  <rSolid name="tidringpar:TIDICC"/>
  <rMaterial name="tidmaterial:TID_ICC2"/>
 </LogicalPart>
 <LogicalPart name="TIDRing2ICBTail" category="unspecified">
  <rSolid name="tidring2:TIDRing2ICBTail"/>
  <rMaterial name="tidmaterial:TID_ICB3"/>
 </LogicalPart>
 <LogicalPart name="TIDRing2ICB" category="unspecified">
  <rSolid name="tidring2:TIDRing2ICB"/>
  <rMaterial name="tidmaterial:TID_ICB3"/>
 </LogicalPart>
 <LogicalPart name="TIDRing2Cool1" category="unspecified">
  <rSolid name="tidring2:TIDRing2Cool1"/>
  <rMaterial name="tidmaterial:TID_Cool_ring"/>
 </LogicalPart>
 <LogicalPart name="TIDRing2Cool2" category="unspecified">
  <rSolid name="tidring2:TIDRing2Cool2"/>
  <rMaterial name="tidmaterial:TID_Cool_ring"/>
 </LogicalPart>
</LogicalPartSection>

<PosPartSection label="tidring2.xml">
 <PosPart copyNumber="1">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDStructure2"/>
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDRing2ICB"/>
  <Translation x="[zero]" y="[zero]" z="-[tidringpar:ICBZ]"/>
 </PosPart>
 <PosPart copyNumber="2">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDRing2ICB"/>
  <Translation x="[zero]" y="[zero]" z="[tidringpar:ICBZ]"/>
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDRing2Cool1"/>
  <Translation x="[zero]" y="[zero]" z="-[tidringpar:CoolZ]"/>
 </PosPart>
 <PosPart copyNumber="2">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDRing2Cool1"/>
  <Translation x="[zero]" y="[zero]" z="[tidringpar:CoolZ]"/>
 </PosPart>
 <PosPart copyNumber="1">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDRing2Cool2"/>
  <Translation x="[zero]" y="[zero]" z="-[tidringpar:CoolZ]"/>
 </PosPart>
 <PosPart copyNumber="2">
   <rParent name="tidring2:TIDRing2"/>
   <rChild name="tidring2:TIDRing2Cool2"/>
  <Translation x="[zero]" y="[zero]" z="[tidringpar:CoolZ]"/>
 </PosPart>
</PosPartSection>

<Algorithm name="track:DDTrackerPhiAlgo">
  <rParent name="tidring2:TIDRing2"/>
  <String name="ChildName"    value="tidring2:TIDRing2ICBTail"/>
  <Numeric name="Radius"      value="[ICBTailRPos]"/>
  <Numeric name="Tilt"        value="-90*deg"/>
  <Vector name="Phi" type="numeric" nEntries="4">
   100.0*deg,         109.0*deg,          280.0*deg,         289.0*deg
  </Vector>
  <Vector name="ZPos" type="numeric" nEntries="4">
  -[tidringpar:ICBZ], [tidringpar:ICBZ], -[tidringpar:ICBZ], [tidringpar:ICBZ]
  </Vector>
</Algorithm>

<Algorithm name="track:DDTrackerAngular">
  <rParent name="tidring2:TIDStructure2"/>
  <String  name="ChildName"   value="tidringpar:TIDCoolManifold"/>
  <Numeric name="N"           value="2" />
  <Numeric name="StartCopyNo" value="1" />
  <Numeric name="IncrCopyNo"  value="1" />
  <Numeric name="RangeAngle"  value="360*deg"/>
  <Numeric name="StartAngle"  value="14.50*deg"/>
  <Numeric name="Radius"      value="[zero]"/>
  <Vector name="Center" type="numeric" nEntries="3"> 0, 0, 0 </Vector>
</Algorithm>

<Algorithm name="track:DDTIDRingAlgo">
  <rParent name="tidring2:TIDRing2"/>
  <Vector name="ModuleName" type="string" nEntries="2">
   tidmodule2:TIDModule2,   tidmodule2:TIDModule2</Vector>
  <String name="ICCName"            value="tidring2:TIDICC2"/>
  <String name="CoolName"           value="tidringpar:TIDCoolInsert"/>
  <Numeric name="Number"            value="[NPhi]" />
  <Numeric name="StartAngle"        value="[PhiOff]" />
  <Numeric name="ModuleR"           value="[RPos]" />
  <Vector name="ModuleZ"    type="numeric" nEntries="2">
  -[tidringpar:ModuleZSS],    [tidringpar:ModuleZSS]   </Vector>
  <Numeric name="ICCR"              value="[ICCRPos]" />
  <Vector name="ICCZ"       type="numeric" nEntries="2">
  -[tidringpar:ICCZ],         [tidringpar:ICCZ]        </Vector>
  <Vector name="CoolR"      type="numeric" nEntries="2">
   [tidring2:CoolR1],         [tidring2:CoolR2]        </Vector>
  <Vector name="CoolZ"      type="numeric" nEntries="2">
  -[tidringpar:CoolInsertZ],  [tidringpar:CoolInsertZ] </Vector>
  <Numeric name="FullHeight"        value="[tidmodule2:FullHeight]"/>
  <Numeric name="DlTop"             value="[tidmodule2:DlTop]"/>
  <Numeric name="DlBottom"          value="[tidmodule2:DlBottom]"/>
  <Numeric name="DlHybrid"          value="[tidmodule2:DlHybrid]"/>
  <Numeric name="TopFrameHeight"    value="[tidmodpar:TopFrameHeight]"/>
  <Numeric name="BottomFrameHeight" value="[tidmodpar:BottomFrameHeight]"/>
  <Numeric name="BottomFrameOver"   value="[tidmodpar:BottomFrameOver]"/>
  <Numeric name="SideFrameWidth"    value="[tidmodpar:SideFrameWidth]"/>
  <Numeric name="SideFrameOver"     value="[tidmodpar:SideFrameOver]"/>
  <Numeric name="HybridHeight"      value="[tidmodpar:HybridHeight]"/>
  <Numeric name="HybridWidth"       value="[tidmodpar:HybridWidth]"/>
  <Numeric name="CoolWidth"         value="[tidringpar:CoolInsertW]"/>
  <Numeric name="CoolSide"          value="[tidring2:CoolSide]"/>
</Algorithm>

</DDDefinition>
