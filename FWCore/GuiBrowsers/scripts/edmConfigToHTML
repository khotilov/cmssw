#!/usr/bin/env python

from optparse import OptionParser, OptionGroup
from Vispa.Plugins.ConfigBrowser.ConfigDataAccessor import ConfigDataAccessor
from Vispa.Plugins.ConfigBrowser.HTMLExport import HTMLExport
import os.path
import sys
"""
Command line tool for the HTMLExport mode of GuiBrowser

gfball
"""


parser = OptionParser(usage='Usage: %prog [options] file_cfg.py')

g1 = OptionGroup(parser,"Basic Options")

g1.add_option('-n','--name',dest='name',help='Name to use for output file(s). Defaults config_cfg.html',type='string',default=None,metavar='NAME')

parser.add_option_group(g1)

(options,args)=parser.parse_args()

html = HTMLExport()
  
if not len(args)>0:
  print "No config files specified. Please specify one."
  print args
  sys.exit(0)

for cfgfile in args:
  if not options.name:
    options.name = os.path.basename(cfgfile).rsplit('.',1)[0] + '.html'
  if not os.path.exists(cfgfile):
    print "File does not exist: %s" % cfgfile
  
  data = ConfigDataAccessor()
  data.open(cfgfile)

  html.export(data,options.name,'html')
