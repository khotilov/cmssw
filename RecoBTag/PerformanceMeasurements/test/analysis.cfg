process analysis = {

  #keep the logging output to a nice level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
	 untracked vstring fileNames = {
	 #'/store/mc/2007/7/11/CSA07-QCD_Pt_80_120-2027/0001/0001F088-9832-DC11-A133-000423DCF6B8.root'
	 #'/store/mc/2007/7/17/CSA07-QCD_Pt_50_80-2049/0003/002B6C8B-8D35-DC11-AAAA-001617C3B6A0.root'
	 #'/store/mc/2007/7/11/CSA07-QCD_Pt_80_120-2027/0001/0001F088-9832-DC11-A133-000423DCF6B8.root'
	'/store/CSA07/skims/2007/10/25/CSA07-CSA07AllEvents-Stew-B1-PDAllEvents-Skims0/0000/D2053D90-CC87-DC11-BC0B-001731AF687F.root'
	 }
  }
  
  untracked PSet maxEvents = { untracked int32 input = 10 }

replace PoolSource.fileNames = {
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/468AA3A0-D6A4-DC11-998C-000423D98DC4.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/54763F9C-D6A4-DC11-9670-000423D99896.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/7EB56594-D6A4-DC11-AF6B-000423D95030.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/A2180C99-D6A4-DC11-B0C6-000423D98B5C.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/B48E5C98-D6A4-DC11-8E47-000423D952C0.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/D46A248E-D6A4-DC11-A9B8-000423D9890C.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/D663E2A7-D6A4-DC11-AF19-0019DB29C620.root',
'/store/mc/2007/12/5/RelVal-RelValQCD_Pt_50_80-1196896807/0001/ECA3D09F-D6A4-DC11-93A5-000423D33970.root'
}

  # rerun track counting to pickup new default
  #include "RecoBTag/TrackCounting/data/trackCounting.cff"
  # include track probability tagger, needed in 13X
  # include "RecoBTag/TrackProbability/data/trackProbability.cff"

  # jet corrections
  include "JetMETCorrections/MCJet/data/MCJetCorrections152.cff"
  es_prefer MCJetCorrectorIcone5 = MCJetCorrectionService {}

  include "RecoBTag/PerformanceMeasurements/data/JetPartonAssoc.cff"
  sequence jetPartonAssoc = {caloJetCollectionClone, tagJet}
  include "RecoBTag/PerformanceMeasurements/data/PerformanceAnalyzer.cff"
  replace Performance.outputFile = "results_muoninjet.root"
  # the following line is needed for RECO samples
  replace Performance.GenJets = "iterativeCone5GenJets"
  # use the next line if you want to use HepMC collection for flavor ID
  replace Performance.flavourMatchOption = "hepMC"
  # Track Associators (for TrackCategories only for RECO)
  include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
  include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
 
  # CSA07 EVENT WEIGHTS 
  module csaweightproducer = CSA07EventWeightProducer {
    InputTag src = source

    # verbosity
    untracked bool talkToMe = true

    # overall luminosity normalization  (in pb-1)
    double overallLumi = 1000.
  }

  include "RecoBTag/TrackProbability/data/negativeOnlyJetProbabilityComputer.cfi"
  include "RecoBTag/TrackProbability/data/positiveOnlyJetProbabilityComputer.cfi"
  include "RecoBTau/JetTagProducer/data/jetTagRecord.cfi"
  include "RecoBTag/ImpactParameter/data/impactParameter.cff"

  module jetProbabilityJetTagsNegativeOnly =  JetTagProducerImpactParameter 
     { 
       InputTag tagInfo = impactParameterTagInfos
       string jetTagComputer = "negativeOnlyJetProbability"
      }
  
  module jetProbabilityJetTagsPositiveOnly =  JetTagProducerImpactParameter 
     { 
       InputTag tagInfo = impactParameterTagInfos
       string jetTagComputer = "positiveOnlyJetProbability"
      }



    es_module negativeTrackCounting3D2nd = NegativeTrackCountingESProducer {
	string ComponentName = "negativeTrackCounting3D2nd"
	PSet JetTagComputerPSet = {
	    int32 nthTrack = 2
	    int32 impactParamterType = 0
        }
    }
    
    module negativeTrackCounting2ndTrck =  JetTagProducerImpactParameter
    {
	InputTag tagInfo = impactParameterTagInfos
	string jetTagComputer = "negativeTrackCounting3D2nd"
    }
    
    es_module negativeTrackCounting3D3rd = NegativeTrackCountingESProducer {
	string ComponentName = "negativeTrackCounting3D3rd"
	PSet JetTagComputerPSet = {
	    int32 nthTrack = 3
	    int32 impactParamterType = 0
        }
    }
    
    module negativeTrackCounting3rdTrck =  JetTagProducerImpactParameter
    {
	InputTag tagInfo = impactParameterTagInfos
	string jetTagComputer = "negativeTrackCounting3D3rd"
    }
    
    module OUTPut = PoolOutputModule {
      untracked string fileName = "testtt.root"
      untracked vstring outputCommands = { 
	"keep *"
      }
    }

  # running without weights
  path p = {
       MCJetCorJetIcone5,
       #trackCountingJetTags,
       #trackProbabilityJetTags,
       impactParameterTagInfos,
       jetProbabilityJetTagsNegativeOnly,
       jetProbabilityJetTagsPositiveOnly,
       negativeTrackCounting2ndTrck,
       negativeTrackCounting3rdTrck,
       jetPartonAssoc,
       #csaweightproducer,
       Performance
       #OUTPut
  }
		
}
