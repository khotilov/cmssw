process GENSIM  = {
                                                                                                                                          
  # initialize  MessageLogger                                                                                                                                                                                                                                                                       
  include "FWCore/MessageService/data/MessageLogger.cfi"
  replace MessageLogger.cout.threshold = "ERROR"
  replace MessageLogger.cerr.default.limit = 10
  
  # initialize random number seeds
  service = RandomNumberGeneratorService
  {
     untracked uint32 sourceSeed = 123456789
     PSet moduleSeeds =
     {
        untracked uint32 VtxSmeared = 98765432
        untracked uint32 g4SimHits  = 11       }
  }
  
  
  # generation parameters
  source = PythiaSource 
  {
    untracked int32 maxEvents = 1000
    untracked bool pythiaVerbosity = true

    PSet PythiaParameters = 
    {
      # This is a vector of ParameterSet names to be read, in this order
      vstring parameterSets = 
      {
        "pythiaUESettings",
        "pythiaBJets"
      }

      # CMS default pythia parameters
      include "Configuration/Generator/data/PythiaUESettings.cfi"

      # c jets (configuration by Filip Moortgat)
      vstring pythiaBJets = 
      {
        'MSEL=0          ! User defined processes',
        'MSUB(81)=1      ! qq->QQ massive',
        'MSUB(82)=1      ! gg->QQ massive',
        'MSTP(7)=4       ! 5 for BB_bar',
        'CKIN(3)=30.     ! Pt hat lower cut',
        'CKIN(4)=50.    ! Pt hat upper cut',
        'CKIN(13)=0.     ! etamin',
        'CKIN(14)=2.5    ! etamax',
        'CKIN(15)=-2.5   ! -etamax',
        'CKIN(16)=0.     ! -etamin'
      }
    }
  }
  # simulation parameters
  include "Configuration/StandardSequences/data/Simulation.cff"
  include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

  path p1 = {psim}  # simulation
                                                                                                                                          
  # Event output
  include "Configuration/EventContent/data/EventContent.cff"
  module GEN-SIM = PoolOutputModule 
  { 
    using FEVTSIMEventContent
    untracked string fileName = "file:test.root"
    untracked PSet datasets ={
	untracked PSet dataset1 = {
	    untracked string dataTier = "GEN"
	}

        untracked PSet dataset2 = {
            untracked string dataTier = "SIM"
     	}
    }

   untracked PSet SelectEvents = {
      vstring SelectEvents = { "p1" }
	}


  }                                                                                                                                      
  endpath outpath = {GEN-SIM}
                                                                                                                                          
  schedule = { p1, outpath }
                                                                                                                                          
                                                                                                                                          
}
