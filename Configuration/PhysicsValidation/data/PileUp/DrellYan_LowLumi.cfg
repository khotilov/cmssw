process T = 
{

# include services
 include "Configuration/ReleaseValidation/data/Services.cfi"

# initialize  MessageLogger 
 include "FWCore/MessageLogger/data/MessageLogger.cfi"

  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98765
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 123456789
         untracked uint32 g4SimHits = 9876
      }

  }

        untracked PSet options = {
              untracked bool makeTriggerResults = false
	vstring listOfTriggers = {}
}

   
# Event generation with PYTHIA

  include "DrellYan.cfg"
  replace PythiaSource.maxEvents = 200000
  replace PythiaSource.maxEventsToPrint = 1   

  # Primary vertex smearing
  include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

  # include geant4 simulation
  include "SimG4Core/Application/data/SimG4Object.cfi"

  # Digitize the hits.
#  include "SimG4Core/Application/data/DigiWithEcalZeroSuppression.cff"
  include "Configuration/PhysicsValidation/data/DigiWithEcalZeroSuppression.cff" 
#  include "Configuration/PhysicsValidation/data/Digi.cff"

 # Reconstruct the event.
  include "Configuration/PhysicsValidation/data/RECO.cff"

  # Add Validation Branch after Simulation
  include "Validation/MuonHits/data/muonHitsValidation.cfi"

  path p1 = { VtxSmeared, g4SimHits, vp }
  path p2 = {  doAllDigiWithEcalZeroSup }
  path p3 = { reconstruction }
  
  include "Configuration/EventContent/data/FEVTOutput.cff"

  module GEN-SIM-DIGI-RECO = PoolOutputModule
  { 
    untracked string fileName = "PhysVal-DrellYan-noPU.root"
    using FEVTOutput
  }

   schedule = {p1, p2, p3,e}	

  endpath e = 
  {
    GEN-SIM-DIGI-RECO
  }
}
