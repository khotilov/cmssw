process T = 
{
    service = RandomNumberGeneratorService
    {
	untracked uint32 sourceSeed = 98765
	PSet moduleSeeds =
	{
	    untracked uint32 VtxSmeared = 123456789
	}
    }
    
    source = FlatRandomPtGunSource 
    { 
	string psethack  = "single mu pt 100 neg"	
	untracked uint32 firstRun  =  1
	untracked int32 maxEvents = 10
	untracked PSet PGunParameters =
	{
	    untracked vint32  PartID = {13}
	    untracked double MinEta = -2.5
	    untracked double MaxEta =  2.5
	    untracked double MinPhi = -3.14159265358979323846 # in radians
	    untracked double MaxPhi =  3.14159265358979323846
	    untracked double MinPt  =  99.99
	    untracked double MaxPt  = 100.01
	}
	untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
    }
    
    
    
    include "SimG4Core/Application/data/SimG4Object.cfi"
    include "Configuration/PhysicsValidation/data/DigiWithEcalZeroSuppression.cff"
    include "Configuration/PhysicsValidation/data/Mixing.cff"
    include "Configuration/Examples/data/RECO.cff"
    include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
    
    path p1 = { VtxSmeared,  g4SimHits}
    
    #
    # pileup options
    # mixWithPileUp:
    # - bx=[-5,+3]
    # - 5 minbias per bx, taken from 110 production (53k) (poisson distrib)
    # mixWithPileUpTest:
    # - needs a minbias.root file to take events from
    # - piles up only at bx=0
    # - piles up exaclty 2 events
    # mixNoPileup:
    # - no pileup
    #
    
    path p2 = {mixWithPileUpTest, doAllDigiWithEcalZeroSup}
#
# reconstruction: 4 sequences available with different tracking options
# "reconstruction": only KF
# "reconstruction_plusRS": KF + RS
# "reconstruction_plusGSF": KF + GSF
# "reconstruction_plusRS_plusGSF": KF + GSF + RS
#
    path p3 ={      reconstruction}
    
    include "Configuration/Examples/data/DropTrackingIntermediateStuff.cff"
    
    module FEVT = PoolOutputModule
    { 
	untracked string fileName = "single_mu_pt_100_negative.root"
	using DropTrackingIntermediateStuff
	untracked PSet datasets ={
	    untracked PSet dataset1 = {
		untracked string dataTier = "FEVT"
	    }
	    
	}
    }
    replace FEVT.outputCommands += "keep *"
    
    schedule = {p1,p2,p3,e}	
    
    endpath e = 
    {
	FEVT
    }
}
