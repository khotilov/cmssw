#
# CSA06 Skim Reco for Zee to be run at T1
# Filter Z events in suitable mass range and requires pt and eta theshold for electrons
# Then produces for selected events
# a) AlcaReco for calibration
# b) RECO events
# Created by Paolo Meridiani
# Tested on 25/09/2006

process ZeeSkim= {
include "Configuration/EventContent/data/RECOSIMOutput.cff"

  untracked PSet options = {
      untracked bool wantSummary = true  # default is false
  }

  ### keep the logging output to a nice level ###
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

service = AdaptorConfig {}

  source = PoolSource {
    untracked vstring fileNames =
	{
        '/store/CSA06/CSA06-102-os-EWKSoup-0/RECO/CMSSW_1_0_2-RECO-He161069e60f9472aa003070c3d42e060/FAAE52C3-6954-DB11-B281-000E0C4D357C.root'	    
	}
	untracked int32 maxEvents = -1
	untracked uint32 debugVerbosity = 1
	untracked bool   debugFlag     = true
  }

    module zeeFilter = MCZll
    {
	untracked double zMassMin = 50.
	untracked double zMassMax = 130.
	untracked double leptonPtMin = 5.
	untracked double leptonPtMax = 999999.
	untracked double leptonEtaMin = 0.
	untracked double leptonEtaMax = 2.7
    }

    module electronFilter = EtaPtMinElectronSelector
    {
	InputTag src = pixelMatchElectrons
	bool filter = true
	double ptMin = 5.0
	double etaMin = -2.7
	double etaMax = 2.7
    }

    include "Calibration/EcalAlCaRecoProducers/data/alCaIsolatedElectrons.cfi"

    path p1={ zeeFilter }
    path p2={ zeeFilter, electronFilter ,  alCaIsolatedElectrons }

    module ALCARECO1 = PoolOutputModule
    {
	untracked string fileName = "eg_alCaElectrons.root" 
        untracked string filterName = "eg_alcastreamElectron_ZeeFilter"
        untracked string dataTier = "ALCARECO"
	untracked vstring outputCommands = 
	{
	    "drop  *",
	    "keep  TrackCandidates_pixelMatchElectrons_*_*",
            "keep  *_electronFilter_*_*",
            "keep  *_alCaIsolatedElectrons_*_*",
	    "keep  *_zeeFilter_*_*"
	}
	untracked PSet SelectEvents = 
	{
	    vstring SelectEvents = { "p1" }
	}
    }

    module RECOSIM1 = PoolOutputModule
    {
	untracked string fileName = "eg_skimmedEleFullReco.root" 
        untracked string filterName = "eg_ZeeFilter"
        untracked string dataTier = "RECOSIM"
	using RECOSIMOutput
	untracked PSet SelectEvents = 
	{
	    vstring SelectEvents = { "p1" }
	}
    }

   endpath outpathAlca = { ALCARECO1 }
   endpath outpathFull = { RECOSIM1 }
}
