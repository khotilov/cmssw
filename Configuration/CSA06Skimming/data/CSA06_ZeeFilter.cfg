#
# CSA06 Skim Reco for Zee to be run at T1
# Filter Z events in suitable mass range and requires pt and eta theshold for electrons
# Then produces for selected events
# a) AlcaReco for calibration
# b) RECO events
# Created by Paolo Meridiani
# Tested on 25/09/2006

process ZeeSkim= {

  untracked PSet options = {
      untracked bool wantSummary = true  # default is false
  }

  ### keep the logging output to a nice level ###
  include "FWCore/MessageLogger/data/MessageLogger.cfi"



  source = PoolSource {
    untracked vstring fileNames =
	{	    
	    '/store/RelVal/2006/9/24/RelVal101Z-EE/2276204B-9B4C-DB11-A18D-000E0C4DE6CD.root'
	}
	untracked int32 maxEvents = -1
	untracked uint32 debugVerbosity = 1
	untracked bool   debugFlag     = true
  }

    module zeeFilter = MCZll
    {
	untracked double zMassMin = 50.
	untracked double zMassMax = 130.
	untracked double leptonPtMin = 5.
	untracked double leptonPtMax = 999999.
	untracked double leptonEtaMin = 0.
	untracked double leptonEtaMax = 2.7
    }

    module electronFilter = EtaPtMinElectronSelector
    {
	InputTag src = pixelMatchElectrons
	bool filter = true
	double ptMin = 5.0
	double etaMin = -2.7
	double etaMax = 2.7
    }

    include "Calibration/EcalAlCaRecoProducers/data/alCaIsolatedElectrons.cfi"

    path p1={ zeeFilter }
    path p2={ electronFilter , alCaIsolatedElectrons }

    module outAlcaReco = PoolOutputModule
    {
	untracked string fileName = "/tmp/meridian/alCaElectrons.root" 
	untracked vstring outputCommands = 
	{
	    "drop  *",
	    "keep  *_electronFilter_*_*",
	    "keep  *_alCaIsolatedElectrons_*_*",
	    "keep  *_zeeFilter_*_*"
	}
	untracked PSet SelectEvents = 
	{
	    vstring SelectEvents = { "p1" }
	}
    }

    module outFullReco = PoolOutputModule
    {
	untracked string fileName = "/tmp/meridian/skimmedEleFullReco.root" 
		untracked vstring outputCommands = 
	{
	    "keep *",
	    "drop  *_electronFilter_*_*",
	    "drop  *_alCaIsolatedElectrons_*_*",
	    "drop  *_zeeFilter_*_*"
	}
	untracked PSet SelectEvents = 
	{
	    vstring SelectEvents = { "p1" }
	}
    }

   endpath outpathAlca = { outAlcaReco }

   endpath outpathFull = { outFullReco }
}
