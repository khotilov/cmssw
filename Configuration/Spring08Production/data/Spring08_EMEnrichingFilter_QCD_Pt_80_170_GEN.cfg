process Gen = {

   untracked PSet maxEvents = {untracked int32 output = 1000}
   # return trigger report (including filter efficiencies)
   untracked PSet options = { untracked bool wantSummary = true }
		
   untracked PSet configurationMetadata = 
   {
      untracked string version = ""
      untracked string name = "" 
      untracked string annotation = "generation of QCD pthat 80-170, with emenriching filter applied"
   }

   include "FWCore/MessageService/data/MessageLogger.cfi"

   # control point for all seeds
   #
   include "Configuration/StandardSequences/data/SimulationRandomNumberGeneratorSeeds.cff"

   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
   
   # physics event generation
   #  
  source = PythiaSource 
  { 
  untracked int32 pythiaPylistVerbosity = 0
  untracked bool pythiaHepMCVerbosity = false
  untracked int32 maxEventsToPrint = 0
  
  # put here the cross section of your process (in pb) dummy
  untracked double crossSection = 3574000.
  # put here the efficiency of your filter (1. if no filter) dummy
  untracked double filterEfficiency =  0.05 #prelim

      PSet PythiaParameters = {
        vstring parameterSets = {
          "pythiaUESettings",
          "pythiaQCD_Pt_80_170"
        }

        include "Configuration/Generator/data/PythiaUESettings.cfi"

        vstring pythiaQCD_Pt_80_170 = {
	 'MSEL=1                 ! QCD high pT processes',
	 'CKIN(3)=80.          ! minimum pt hat for hard interactions',
	 'CKIN(4)=170.          ! maximum pt hat for hard interactions'      
        }
      }
   }
	
   include "GeneratorInterface/GenFilters/data/EMEnrichingFilter.cfi"
   include "GeneratorInterface/GenFilters/data/BCToEFilter.cfi"

   #these are needed by the filter
   include "PhysicsTools/HepMCCandAlgos/data/genParticles.cfi"
   include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
   es_module = UniformMagneticFieldESProducer {
      double ZFieldInTesla = 4.0
   }
   es_prefer = UniformMagneticFieldESProducer{}


   path p1 = {genParticles,!bctoefilter,emenrichingfilter}

   include "Configuration/EventContent/data/EventContent.cff"

   module GEN = PoolOutputModule 
   { 
        using FEVTSIMEventContent
        untracked string fileName = "GEN.root"
        untracked PSet dataset ={       
           untracked string dataTier = "GEN"
        }
        untracked PSet SelectEvents = {
           vstring SelectEvents = {"p1"}
        }
   }

   endpath outpath = {GEN}

   schedule = {p1,outpath}

}
