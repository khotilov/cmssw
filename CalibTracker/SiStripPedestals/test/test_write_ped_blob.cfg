process Test = {

	service = MessageLogger {
		untracked vstring destinations = { "/tmp/write_ped_geom_ideal_blob.log" }
		untracked PSet write_ped_geom_ideal_blob.log = { untracked string threshold = "INFO" }
	}




	service = PoolDBOutputService{
	  string connect = "sqlite_file:/tmp/ped_geom_ideal_blob.db"    
	  untracked string catalog = "file:/tmp/ped_geom_ideal_blob.xml"
          string timetype = "runnumber"    
	  untracked bool loadBlobStreamer = true
	  
	       VPSet toPut={ { untracked string containerName = "SiStripPedestals" string tag ="mytest_ped"} }	
         	  
	}

include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

es_module = TrackerGeometricDetESModule {}
es_module = TrackerDigiGeometryESModule {}

es_source = SiStripFedCablingFromXml {
        string Label="Fed1"
        string XmlParsedFile="./tibPisa_example.dat"
}

include "IORawData/SiStripInputSources/data/TBRUInputSource.cfi"
replace TBRUInputSource.fileNames = { "file:/tmp/RU0512863_000.root" }
replace TBRUInputSource.maxEvents = 100

include "EventFilter/SiStripRawToDigi/data/RawToDigi.cfi"
 replace RawToDigi.UseFedKey = false

service = DaqMonitorROOTBackEnd {}


module prod = SiStripPedDB
{
	 	untracked string userEnv="me"
		untracked string passwdEnv="me"
                string DigiProducer="RawToDigi"
		
                
        PSet PedestalsPSet =
{

string CalculatorAlgorithm = "TT6"
int32 NumCMstripsInGroup =128
int32 MaskCalculationFlag =1
double MaskNoiseCut =3.
double MaskDeadCut = 0.5
double MaskTruncationCut = 0.05
double CutToAvoidSignal =3.
int32 NumberOfEventsForInit = 50
int32 NumberOfEventsForIteration = 20
}

}

       path p = { RawToDigi, prod }
	
	module print = AsciiOutputModule {}
	endpath ep = { print }
}

